# سورس ربات تلگرام فروش VPN(سرور های v2ray)
این سورس کد رو بر پایه یک ربات فروش سرور v2ray تلگرام نوشتم. این ربات از بیس یک پروژه ساده هست و پنل ادمینش آنچنان امکانات دندون گیری نداره. اما از سمت کاربر امکان خرید سرور با لوکیشن دلخواه، امکان خرید با کارت به کارت و کیف پول، امکان مشاهده سرور تست(که در پنل ادمین ست میشه) و... وجود داره.
## راهنمای فعال سازی(ران کردن ربات)
فایل bot.php رو به حالت ویرایش در بیارید. در این فایل شما با کد های زیر کار دارید :
```
$serverName = "localhost";
$userName = ""; // یوزرنیم دیتابیس
$password = ""; // پسورد دیتابیس
$dbName = ""; // نام دیتابیس

$conn = mysqli_connect($serverName, $userName, $password, $dbName);

//---------------------------------------------------------------------------------------------
define('API_KEY', 'TOKEN'); // توکن ربات رو به جای عبارت TOKEN قرار بدید
$table = "table-users"; // نام جدول شما در دیتابیس - حتما انگلیسی باشه
$botTable = "table-bot"; // نام جدول دوم شما در دیتابیس - حتما انگلیسی باشه
$admins = [1, 2, 3]; // آیدی عددی ادمین های ربات رو در این آرایه قرار بدید
$chanel = "";
$card = "";
$cardName = "";
```
متغیر ها و ثابت هایی که کنارشون کامنت گذاری شده که تکلیفشون مشخصه.
### متغیر $chanel
در این متغیر، آیدی یا لینک کانال پشتیبانی ربات رو قرار بدید. پیام های درخواست خرید سرور یا درخواست شارژ کیف پول از طریق ربات به آدرسی که در این متغیر قرار می دهید ارسال میشن. می تونید به جای لینک یک چنل، آیدی عددی گروه یا آیدی عددی یک شخص رو هم قرار بدید. همچنین ربات باید در کانال یا گروهی که لینک یا آیدیش رو در این متغیر می ذارید ادمین باشه.
### متغیر های $card و $cardName
در متغیر $card، شماره کارتی جهت نمایش به کاربران قرار بدید. همچنین در متغیر $cardName نام و نام خانوادگی صاحب کارت رو قرار بدید.
**حالا فایل bot.php رو دخیره کنید و ببنید و سپس روی همین فایل عملیات ست وبهوک رو انجام بدید.**
## آموزش ویرایش سورس کد
خوشبختانه از همون لحظه ای که شروع به نوشتن سورس کد این ربات کردم، به خودم قول دادم که ی چیز مرتب و جمع و جور باشه؛ و بالاخره اینطور هم شد. حالا اگر می خواید متن های دکمه ها یا بخش های کلیدی ربات رو ویرایش کنید، مجبور نیستید میون انبوهی از کدها سردرگم شید. من این کارو براتون کاملا راحت کردم:)
### ویرایش دکمه ها
برای ویرایش متن دکمه ها یا هر بخش دیگه ای که مربوط به کیبورد ربات میشه، می تونید به فایل keyboards.php مراجعه کنید. ربات کیبورد های زیادی نداره و کیبورد های مربوط به پنل ادمین و پنل کاربری با کامنت از هم جدا شدن که کارتون رو ساده تر هم می کنه.
### فانکشن serverLocationKeyboard
در هنگام انتخاب لوکیشن سرور توسط کاربر، ربات لیست اکانت هایی که از اون سرور میفروشید رو به صورت دکمه شیشه ای به کاربر نمایش میده. این فانکشن، تعیین می کنه که در صورت انتخاب کدام لوکیشن کدام کیبورد به کاربر نمایش داده بشه.
**نام لوکیشن هایی که ازشون سرور میدید رو باید در این فانکشن و در کیبوردی که در متغیر $serverLocationPanel در فایل  keyboards.php قرار داره مطابق مثل زیر قرار بدید**
#### نمونه کد کیبورد
```
$serverLocationPanel = json_encode([
    'inline_keyboard' => [
        [['text' => "🇫🇷 فرانسه", 'callback_data' => "🇫🇷 فرانسه"]],
        [['text' => "🇩🇪 آلمان", 'callback_data' => "🇩🇪 آلمان"]],
        [['text' => "🇬🇧 انگلستان", 'callback_data' => "🇬🇧 انگلستان"]],
        [['text' => "🇳🇱 هلند", 'callback_data' => "🇳🇱 هلند"]],
    ]
]);
```
#### نمونه کد فانکشن
```
function serverLocationKeyboard($data, $franceServers, $germanyServers, $englandServers, $netherlandsServers)
{
    switch ($data) {
        case "🇫🇷 فرانسه":
            $a = $franceServers;
            break;
        case "🇩🇪 آلمان":
            $a = $germanyServers;
            break;
        case "🇬🇧 انگلستان":
            $a = $englandServers;
            break;
        case "🇳🇱 هلند":
            $a = $netherlandsServers;
            break;
    }
    return $a;
}
```
### فانکشن serversDescription
همونطور که از اسمش هم پیداست، این فانکشن شامل اطلاعات مربوط به هر اکانت سرور میشه. این فانکشن از طریق کالبک دیتای دکمه ای که کاربر روش کلیک کرده، سروری که کاربر انتخاب کرده رو شناسایی می کنه و اطلاعاتش رو براش ارسال می کنه. این دیتا همچنین در دیتابیس هم ذخیره میشه تا همین فانکشن در جاهای دیگری ازش استفاده کنه
#### نمونه کد فانکشن
```
function serversDescription($selectedServer)
{
    switch ($selectedServer) {
        case "france-1":
            $a = ["🔻دوکاربره | یک ماهه 10 گیگ", 30000, "🇫🇷 فرانسه", 10, 30];
            break;
        case "france-2":
            $a = ["🔻دوکاربره | یک ماهه 20 گیگ", 50000, "🇫🇷 فرانسه", 20, 30];
            break;
        case "france-3":
            $a = ["🔻دوکاربره | یک ماهه 30 گیگ", 70000, "🇫🇷 فرانسه", 30, 30];
            break;
        case "france-4":
            $a = ["🔻دوکاربره | یک ماهه 50 گیگ", 90000, "🇫🇷 فرانسه", 50, 30];
            break;
        case "france-5":
            $a = ["🔻دوکاربره | دو ماهه 70 گیگ", 135000, "🇫🇷 فرانسه", 70, 60];
            break;
    }
    return $a;
}
```
##### توضحیات مربوطه
این فانکشن اطلاعات رو در قالب یک آرایه بر می گردونه. ایندکس 0 آرایه شامل یک نام نمایشی برای سرور میشه. ایندکس 1 هم قیمت این سرور هست. همچنین لوکیشن این سرور نیز در ایندکس 2 قرار میگیره و حجم این اکانت(به گیگ) در ایندکس 3. در نهایت نهایت تعداد روز هایی که این اکانت فعال خواهد بود نیز در ایندکس 4 قرار میگیره.
### توضحیات فانکشن serverLocationDescription
به احتمال زیاد شماهم مثل بقیه فیلترشکن فروش ها، بیشتر از یک لوکیشن برای سرور هاتون دارید. حالا اگر می خواید برای هر کدام از این لوکیشن ها توضیحات اختصاصی ای بنویسید و به کاربر نشون بدید، می تونید از این فانکشن استفاده کنید. البته من خودم در سورس کد چنین کاری نکردم چون به نظرم کمی اضافی بود. اما کدش رو برای شما گذاشتم که در صورت تمایل، چنین کاری در بخشی از ربات انجام بدید.
```
function serverLocationDescription($serverLocation)
{
    switch ($serverLocation) {
        case "🇫🇷 فرانسه":
            $a = "سرور های کشور فرانسه، به صورت تک سروره ارائه می شوند. این سرور، تا 30 روز دسترسی شمارا به تمام سایت ها و برنامه هایی که به دلیل فیلترینگ قادر به دسترسی به آن ها نیستید فراهم می کند.";
            break;
        case "🇩🇪 آلمان":
            $a = "سرور های کشور آلمان، به صورت چند سروره ارائه می شوند. این سرور، تا 30 روز دسترسی شمارا به تمام سایت ها و برنامه هایی که به دلیل فیلترینگ قادر به دسترسی به آن ها نیستید فراهم می کند.";
            break;
        case "🇬🇧 انگلستان":
            $a = "سرور های کشور انگلستان، به صورت چند سروره ارائه می شوند. این سرور، تا 30 روز دسترسی شمارا به تمام سایت ها و برنامه هایی که به دلیل فیلترینگ قادر به دسترسی به آن ها نیستید فراهم می کند.";
            break;
        case "🇳🇱 هلند":
            $a = "سرور های کشور هلند، به صورت چند سروره ارائه می شوند. این سرور، تا 30 روز دسترسی شمارا به تمام سایت ها و برنامه هایی که به دلیل فیلترینگ قادر به دسترسی به آن ها نیستید فراهم می کند.";
            break;
    }
    return $a;
}

$serverLocationDescription = serverLocationDescription($serverLocation);
```

##### پایان ماجرا
خب این بود از سورس ربات تلگرام فروش فیلترشکن(سرور v2ray) ما. اگر از این سورس کد خوشتون اومد یا انتقادی بهش داشتید خوشحال میشم برام کامنت کنید یا بهش امتیاز بدید. برا خوشحال کردن من هم می تونید من رو در کانال تلگرامم دنبال کنید :)
**https://t.me/theAriaChannel**
